{% extends 'base.html' %}
{% load url from future %}
{% block title %}Corem {{ corem.corem_id }}{% endblock %}
{% block javascript %}
    <script type="text/javascript" src="/static/javascripts/isblogo_mod_ab.js"></script>
{% endblock %}
{% block nav %}
<!-- navigation starts-->
	<div  id="nav">
		<ul>
        <li><a href="{% url 'index' %}">Home</a></li>
        <li id="current"><a href="{% url 'browse' %}">Browse</a></li>
        <li><a href="{% url 'search' %}">Search</a></li>
        <li><a href="{% url 'downloads' %}">Downloads</a></li>
        <li><a href="{% url 'contact' %}">Support</a></li>
        <li><a href="{% url 'about' %}">About</a></li>
		</ul>
	<!-- navigation ends-->
	</div>	
{% endblock %}
{% block content %}
	<!-- content-wrap starts -->
	<div id="content-wrap">

		<div id="main">
      <script>
        $(document).ready(function() {        
          $("#genes").dataTable({
            "bFilter": false,
            "bSort": true,
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "{% url 'corem_genes_json' %}{{species}}/{{corem}}",
            "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, 'All']]
          });
          $("#gres").dataTable({
            "bFilter": false,
            "bSort": true,
            "aaSorting": [[1, 'asc']],
            "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, 'All']]
          });
          $("#conditions").dataTable({
            "bFilter": false,
            "bSort": true,
            "aaSorting": [[2, 'asc']],
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "{% url 'corem_conditions_json' %}{{species}}/{{corem}}",
            "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, 'All']]
          });
          $("#biclusters").dataTable({
            "bFilter": false,
            "bSort": true,
            "aaSorting": [[1, 'asc']],
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "{% url 'corem_biclusters_json' %}{{species}}/{{corem}}",
            "aLengthMenu": [[10, 25, 50, -1], [10, 25, 50, 'All']],
            "aoColumnDefs": [ { 'bSortable': false, 'aTargets': [2, 3]}]
          });              
        });
      </script>
			<blockquote><p>Expression</p></blockquote>
      <div>
        <img src="/static/images/expression/{{ s.ncbi_taxonomy_id }}/corems/{{ corem.corem_id }}.png" background-color="black" width=100% height=100% class="float-center" />
        <img src="/static/images/expression/{{ s.ncbi_taxonomy_id }}/corems/legend.png" background-color="black" width=100% height=100% class="float-center" />
      </div>
      <blockquote><p>Genes</p></blockquote>
      <table id="genes" class="table">
        <thead>
          <tr>
            <th class="first">Gene name</th>
            <th>Common name</th>
            <th>Accession</th>
            <th>Description</th>
            <th>Start</th>
            <th>Stop</th>
            <th>Strand</th>
            <th>Chromosome</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
      <blockquote><p>GREs</p></blockquote>
      <table id="gres" class="table">
        <thead>
          <tr>
            <th class="first">GRE ID</th>
            <th>pval</th>
            <th>PSSM</th>
          </tr>
        </thead>
        <tbody>
          {% for o in gre_obj %}
          <tr class="{% cycle 'row-a' 'row-b' %}">
            <td class="first"><a href="{% url 'gre_detail' s.ncbi_taxonomy_id o.gre_id %}">{{ o.gre_id }}</a></td>
            <td>{{ o.corem_pval }}</td>
            <td><img src="/static/images/gres/{{ s.ncbi_taxonomy_id }}/{{ o.gre_id }}.png" background-color="black" width=220 height=120 class="float-center" /></td>
            <!-- <td><span id="previewcanvas_{{ o.gre_id }}"></span></td> -->
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <blockquote><p>Conditional Activity</p></blockquote>
      <table id="conditions" class="table">
        <thead>
          <tr>
            <th class="first">Condition ID</th>
            <th>Condition Name</th>
            <th>pval</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <blockquote><p>Biclusters</p></blockquote>
      <table id="biclusters" class="table">
        <thead>
          <tr>
            <th class="first">Bicluster ID</th>
            <th>Residual</th>
            <th>Genes</th>
            <th>Conditions</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>      
		  <!-- main ends -->
		</div>
{% endblock %}
